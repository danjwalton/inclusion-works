required.packages <- c("reshape2", "ggplot2", "data.table")
lapply(required.packages, require, character.only = T)
wd <- "G:/My Drive/Work/GitHub/inclusion-works/"
setwd(wd)
fread("NORAD.csv")
fread("project_data/NORAD.csv")
fread("project-data/NORAD.csv")
norad <- fread("project-data/NORAD.csv")
View(norad)
required.packages <- c("reshape2", "ggplot2", "data.table")
lapply(required.packages, require, character.only = T)
wd <- "G:/My Drive/Work/GitHub/inclusion-works/"
setwd(wd)
load("project-data/crs 2012-2014.RData")
load("project-data/crs 2015-2017.RData")
crs <- rbind(crs.2012.2014, crs.2015.2017)
rm(list=c("crs.2012.2014", "crs.2015.2017"))
keep <- c(
"crs_id"
,
"year"
,
"aid_type"
,
"flow_name"
,
"donor_name"
,
"recipient_name"
,
"usd_commitment_deflated"
,
"usd_disbursement_deflated"
,
"purpose_name"
,
"project_title"
,
"short_description"
,
"long_description"
)
crs <- crs[, ..keep]
major.keywords <- c(
"disabl", "discapaci", "incapaci", "minusvÃƒÂ¡lido", "invalidit", "infirmitÃƒÂ©"
#,
#"disorder"
,
"handicap"
,
"impairment", "impaired"
,
"pwd", "gwd", "cwd"
,
"chronic health", "chronic ill", "maladie chronique", "enfermedad crÃƒÂ³nica"
,
"deaf", "sordo", "sourd"
,
"blind", "ciego", "aveugle"
,
"special needs", "necesidades especiales", "besoins spÃƒÂ©ciau"
,
"autistic", "autism", "autist"
,
"mental health", "santÃƒÂ© mentale", "salud mental"
,
"prosthes", "prosthÃƒÂ¨s", "prÃƒÂ³tesis"
,
"amputation", "amputee", "amputÃƒÂ©", "amputa"
,
"schizophreni", "esquizofrenia", "schizophrÃƒÂ©nie"
,
"sign language", "langage des signes", "lenguaje de seÃƒÂ±as"
,
"arthriti", "artritis", "arthrite"
,
"rheumat", "rhumat", "reumat"
,
"dementia", "dÃƒÂ©mence", "demencia"
)
minor.keywords <- c(
"war victim", "victimas de guerra", "victimes de guerre"
,
"landmine victim", "victime de mine", "vÃƒ­ctima de minas terrestres"
,
#"wounded"
#,
#"injured", "injuries"
#,
"therapy", "terapia", "thÃƒÂ©rapie"
)
disqualifying.keywords <- c(
"chronic malnutrition"
,
"mole rat"
,
"cgpwd"
,
"road"
,
"highway"
,
"environmental health"
,
"rehydration therapy"
)
crs$major <- 0
crs[grepl(paste(major.keywords, collapse = "|"), tolower(crs$long_description))]$major <- 1
crs[grepl(paste(major.keywords, collapse = "|"), tolower(crs$short_description))]$major <- 2
crs[grepl(paste(major.keywords, collapse = "|"), tolower(crs$project_title))]$major <- 2
crs$minor <- 0
crs[grepl(paste(minor.keywords, collapse = "|"), tolower(paste(crs$project_title, crs$short_description, crs$long_description)))]$minor <- 1
crs$disqualified <- 0
crs[major + minor > 0][grepl(paste(disqualifying.keywords, collapse = "|"), tolower(paste(crs[major + minor > 0]$project_title, crs[minor+major>0]$short_description, crs[major + minor > 0]$long_description)))]$disqualified <- 1
years <- crs[,.(
major=sum(usd_disbursement_deflated[major == 2 & disqualified == 0], na.rm=T)
, minor=sum(usd_disbursement_deflated[(major == 1 | (minor ==1 & major < 2)) & disqualified == 0], na.rm=T)
, none=sum(usd_disbursement_deflated[(major == 0 & minor == 0) | disqualified == 1], na.rm=T)
, major.share=sum(usd_disbursement_deflated[major == 2 & disqualified == 0], na.rm=T)/sum(usd_disbursement_deflated, na.rm=T)
, minor.share=sum(usd_disbursement_deflated[(major == 1 | (minor ==1 & major < 2)) & disqualified == 0], na.rm=T)/sum(usd_disbursement_deflated, na.rm=T)
)
, by=.(year)]
sectors <- crs[,.(
major=sum(usd_disbursement_deflated[major == 2 & disqualified == 0], na.rm=T)
, minor=sum(usd_disbursement_deflated[(major == 1 | (minor ==1 & major < 2)) & disqualified == 0], na.rm=T)
, none=sum(usd_disbursement_deflated[(major == 0 & minor == 0) | disqualified == 1], na.rm=T)
, major.share=sum(usd_disbursement_deflated[major == 2 & disqualified == 0], na.rm=T)/sum(usd_disbursement_deflated, na.rm=T)
, minor.share=sum(usd_disbursement_deflated[(major == 1 | (minor ==1 & major < 2)) & disqualified == 0], na.rm=T)/sum(usd_disbursement_deflated, na.rm=T)
)
, by=.(purpose_name)]
sectors <- sectors[major+minor>0]
donors <- crs[,.(
major=sum(usd_disbursement_deflated[major == 2 & disqualified == 0], na.rm=T)
, minor=sum(usd_disbursement_deflated[(major == 1 | (minor ==1 & major < 2)) & disqualified == 0], na.rm=T)
, none=sum(usd_disbursement_deflated[(major == 0 & minor == 0) | disqualified == 1], na.rm=T)
, major.share=sum(usd_disbursement_deflated[major == 2 & disqualified == 0], na.rm=T)/sum(usd_disbursement_deflated, na.rm=T)
, minor.share=sum(usd_disbursement_deflated[(major == 1 | (minor ==1 & major < 2)) & disqualified == 0], na.rm=T)/sum(usd_disbursement_deflated, na.rm=T)
)
, by=.(donor_name)]
norway <- crs[donor_name=="Norway"]
View(norway)
merge(norway,norad, by.y=c("Recipient Country", "Description of Agreement", "Agreement Title"), by.x=c("recipient_name","short_description","project_title"))
norad$`Description of Agreement` <- toupper(norad$`Description of Agreement`)
merge(norway,norad, by.y=c("Recipient Country", "Description of Agreement", "Agreement Title"), by.x=c("recipient_name","short_description","project_title"))
load("project-data/crs 2012-2014.RData")
load("project-data/crs 2015-2017.RData")
crs2 <- rbind(crs.2012.2014, crs.2015.2017)
duplicated(crs$crs_id, crs2$crs_id)
norway2 <- crs2[crs_id %in% norway$crs_id]
View(crs2)
View(norway2)
norway2 <- crs2[crs_id %in% norway$crs_id & donor_name == "Norway" & crs_id != ""]
View(norway2)
View(norad)
